<!--Title, add and download button -->
<div class="row">
  <div class="col-md-12">
    <div class="page-header">
      <h2>
        Participants
        <small class="totals hidden-xs" ng-show="totals.$resolved">
              <ng-pluralize count="totals.participants" when="{'one': '1 person', 'other': '{} people'}"></ng-pluralize>
              from
              <ng-pluralize count="totals.clubs" when="{'one': '1 club', 'other': '{} clubs'}"></ng-pluralize>
              in
              <ng-pluralize count="totals.countries" when="{'one': '1 country', 'other': '{} countries'}"></ng-pluralize>
        </small>

        <div class="pull-right">
            <div class="btn-group ">
              <button ui-sref=".add" ui-sref-active="active" role="button" class="btn btn-default">
                <span class="glyphicon glyphicon-plus"></span>
                Add
              </button>
              <button ui-sref=".import" ui-sref-active="active" role="button" class="btn btn-default hidden-xs">
                <span class="glyphicon glyphicon-upload"></span>
                Upload
              </button>
              <button  role="button" class="btn btn-default dropdown-toggle hidden-xs" data-toggle="dropdown">
                <span class="glyphicon glyphicon-download"></span> Download<span class="caret"></span>
              </button>
  
              <ul class="dropdown-menu pull-right">
                <!--TODO: Implement links-->
                <li><a href="/download/participants">Participant</a></li>
                <li><a href="/download/clubs">Clubs</a></li>
                <li><a href="/download/details">Finalist Details</a></li>
              </ul>
          </div>
        </div>
      </h2>
    </div>
  </div>
</div>
<!-- Add participants / Import participants -->
<div class="row" ui-view></div>

<!--Search bar -->
<div class="row">
  <div class="col-md-12">
    <form class="form" name="form" novalidate>
      <div class="form-group" >
        <div class="input-group">
          <span class="input-group-btn">
            <button role="button" class="btn btn-default" ng-click="refresh()">
              <span class="glyphicon glyphicon-search" title="Search participants"></span>
            </button>
          </span>
              <input ng-model="searchCriteria.query" ng-keyup="refresh($event)" type="text" class="form-control" placeholder="Search" htm-focus-on="!modalOpen"/>
          <span class="input-group-btn">
            <button role="button" class="btn btn-default" ng-click="registerSelected()">
              <span class="glyphicon glyphicon-ok" title="Register all selected participants"></span>
            </button>

            <button role="button" class="btn btn-default" ng-click="unregisterSelected()">
              <span class="glyphicon glyphicon-remove" title="Unregister all selected participants"></span>
            </button>
          </span>
          </div>
        </div>
      </form>
  </div>    
</div>

<!--Participants table-->
<table class="table table-condensed table-condensed">
  <thead>
    <tr>
      <th><!--Edit--></th>
      <th colspan="2">Country</th>
      <th>Number</th>
      <th>Name</th>
      <th>Club</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat-start="p in participants.list" ng-if="!participants.isEditorActive(p)">
      <td>
        <button class="btn btn-default btn-sm" ng-click="participants.edit(p)">
          <span class="glyphicon glyphicon-wrench"></span>
        </button>
      </td>
      <td><htm-flag country="p.country"></htm-flag></td>
      <td>{{p.country.code2}}</td>
      <td>{{p.number}}</td>
      <td>{{p.name}}</td>
      <td>
        <span class="hidden-xs">{{p.club.name}}</span>
        <span class="visible-xs-inline">{{p.club.code}}</span>
      </td>
    </tr>
    <tr ng-repeat-end ng-if="participants.isEditorActive(p)">
      <td colspan="6">
        <div class="row" ui-view="edit"></div>
      </td>
    </tr>
  </tbody>
</table>